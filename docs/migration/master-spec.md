# Master Specification (SSOT) - Миграция на новый дизайн

## Правила миграции без дублей

Без дублей. Перед любым созданием файла/функции/URL ищи существующее:

```bash
rg -n "<Имя|синонимы>" frontend backend
```

Если аналог есть — расширь/перенеси (git mv).

Создавай новое только при отсутствии аналога.

Удаление старого — в конце шага, когда:
- 0 результатов поиска по старым именам/путям (rg),
- импорты/ссылки обновлены,
- линтер/типы/тесты зелёные,
- чек-лист задачи закрыт.

Единый источник правды (SSOT): docs/migration/master-spec.md.
Любое принятое имя/путь/тип сначала фиксируй там (таблица old→new).

RESTful / kebab-case / nested URL. Без add_/update_/delete_/mark_.

Коммиты атомарно: один модуль/подзадача → один коммит.

Документация/комментарии — на русском.

CI-качество: Front — ESLint/TypeCheck/Jest; Back — black/isort/mypy/pytest.

## Итоговые принципы URL/REST

### Структура URL
- **Формат**: `/api/v1/{resource}/{id}/{sub-resource}`
- **Стиль**: kebab-case (например: `/workspace-settings`)
- **Вложенность**: максимум 3 уровня для читаемости
- **Действия**: через HTTP методы, без add_/update_/delete_/mark_

### Ключевые зоны
- **Notifications**: `/notifications/settings` (а не `/notification-settings`)
- **Search**: `/search/history`, `/search/saved` (или `/search/saved-searches`)
- **Tasks/Comments**: только `/tasks/{id}/comments/`
- **Databases**: `/databases/{id}/records/`, `/databases/{id}/properties/`

## Таблица контрактов (old → new)

| Модуль | Старый путь | Новый путь | Статус | Комментарий |
|--------|-------------|------------|---------|-------------|
|        |             |            |         |             |

## Журнал миграции

### P0 — Контракт, навигация, UI-база

#### TASK P0-00 — Бутстрап
- **Дата**: 
- **Статус**: ✅ Завершено
- **Изменения**: 
  - Создана ветка feat/redesign-p0
  - Установлен ripgrep
  - Создан SSOT master-spec.md
- **Файлы**: docs/migration/master-spec.md

#### TASK P0-10 — Унификация URL
- **Дата**: 
- **Статус**: ⏳ В процессе
- **Изменения**: 
- **Файлы**: 

#### TASK P0-20 — OpenAPI → фронт-SDK
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P0-30 — Drawer/SidePanel и маршруты
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P0-40 — Базовый UI-kit
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P0-50 — Гигиена
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

### P1 — Редактор, комментарии, базы

#### TASK P1-10 — Редактор страницы
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P1-20 — Панель комментариев
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P1-30 — Базы данных: Table/Board
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

### P2 — Полировка

#### TASK P2-10 — Пустые/ошибки/скелетоны
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 

#### TASK P2-20 — Тёмная тема, перф, аналитика
- **Дата**: 
- **Статус**: ⏳ Ожидает
- **Изменения**: 
- **Файлы**: 
